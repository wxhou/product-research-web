/**
 * Analyzer Agent 提示词
 *
 * 用于竞品分析和深度分析的 LLM 提示词
 */

export const SINGLE_FILE_ANALYSIS_PROMPT = `你是资深产品分析师，请分析以下单个文档内容并输出 JSON 格式结果。

【产品主题】
{title}

【产品描述】
{description}

【文档标题】
{fileTitle}

【文档内容】
{content}

【任务要求】
请从当前文档中提取并分析以下信息：

## 1. 核心功能
- 识别产品的主要功能（名称、描述）
- 每个功能需要简洁的描述（20-50字）

## 2. 竞品信息
- 识别文档中提到的竞争产品
- 包含：产品名、行业、核心功能、市场定位

## 3. SWOT 分析
从文档中提取：
- 优势 (Strengths)
- 劣势 (Weaknesses)
- 机会 (Opportunities)
- 威胁 (Threats)

## 4. 市场数据（如果文档中有）
- 市场规模
- 增长率
- 主要玩家
- 市场趋势

## 5. 技术栈（如果文档中有）
- 技术架构
- 使用的主要技术
- 新兴技术应用
- 技术创新点

【输出格式】
请直接输出 JSON，不要添加 \`\`\`json 标记：

{{
  "features": [
    {{"name": "功能名", "description": "功能描述"}}
  ],
  "competitors": [
    {{"name": "竞品名", "industry": "行业", "features": ["功能1", "功能2"], "description": "描述", "marketPosition": "市场定位"}}
  ],
  "swot": {{
    "strengths": ["优势1", "优势2"],
    "weaknesses": ["劣势1", "劣势2"],
    "opportunities": ["机会1", "机会2"],
    "threats": ["威胁1", "威胁2"]
  }},
  "marketData": {{
    "marketSize": "市场规模（如：500亿元）",
    "growthRate": "增长率（如：25%）",
    "keyPlayers": ["玩家1", "玩家2"],
    "trends": ["趋势1", "趋势2"]
  }},
  "techStack": {{
    "architecture": ["架构1", "架构2"],
    "techStack": ["技术1", "技术2"],
    "emergingTech": ["新兴技术1", "新兴技术2"]
  }},
  "confidenceScore": 0.7,
  "dataGaps": ["缺失的数据1"]
}}

【重要规则】
1. 只提取文档中明确提到的信息，不要编造
2. 如果某部分没有信息，返回空数组 []
3. confidenceScore 根据信息完整度评估：0.3-0.5=信息少, 0.5-0.7=信息中等, 0.7-0.9=信息较完整`;

/** 详细分析提示词 - 生成深度分析报告 */
export const DETAILED_ANALYSIS_PROMPT = `你是资深产品分析师，请对以下产品研究数据进行【深度分析】并输出 JSON 格式结果。

【产品主题】
{title}

【产品描述】
{description}

【原始数据】
{extractedContent}

【任务要求】
请对上述数据进行全面深度分析，包括：

## 1. 核心功能分析
- 列出所有识别到的功能（每个功能需包含：名称、出现次数、描述、来源链接）
- 分析功能的用户价值和使用场景
- 识别核心功能（出现频率最高的3-5个）和差异化功能

## 2. 竞品深度分析
- 识别主要竞品（产品名、行业、核心功能、市场定位、描述）
- 分析竞品之间的差异化特征
- 评估各竞品的市场优势和劣势
- 找出竞品未覆盖的市场空白点

## 3. SWOT 深度分析
- 优势(Strengths)：列出3-5条，附带来源证据
- 劣势(Weaknesses)：列出3-5条，附带来源证据
- 机会(Opportunities)：列出3-5条，分析市场趋势支撑
- 威胁(Threats)：列出3-5条，分析竞争环境

## 4. 市场分析
- 市场规模估算和增长率
- 市场主要玩家和市场份额
- 市场发展趋势（3-5个）
- 市场机会点
- 市场挑战和风险

## 5. 使用场景分析
- 主要使用场景（场景名、描述、目标用户、用户价值）
- 目标用户类型分析
- 用户痛点识别
- 产品价值主张

## 6. 技术栈分析（如有信息）
- 技术架构
- 使用的主要技术栈
- 新兴技术应用
- 技术创新点

## 7. 战略建议
- 短期行动（0-3个月）
- 中期规划（3-12个月）
- 长期愿景（1-3年）

【输出格式】
请直接输出 JSON，不要添加 \`\`\`json 标记：

{{
  "features": [
    {{"name": "智能对话", "count": 5, "description": "支持多轮对话、上下文理解、情感识别，显著提升用户交互效率", "sources": ["url1", "url2"]}},
    {{"name": "知识库管理", "count": 4, "description": "企业级知识沉淀、文档管理、智能检索，构建企业知识中台", "sources": ["url1"]}}
  ],
  "competitors": [
    {{"name": "阿里云智能客服", "industry": "云服务", "features": ["智能对话", "知识库", "工单系统"], "description": "阿里云推出的企业级智能客服解决方案，依托阿里云强大基础设施", "marketPosition": "行业领导者，面向大型企业"}}
  ],
  "swot": {{
    "strengths": ["技术成熟稳定，支持大规模并发", "生态完善，与阿里系产品深度集成", "品牌知名度高，信任度强"],
    "weaknesses": ["定价较高，中小企业门槛高", "定制化能力有限，灵活度不足"],
    "opportunities": ["AI大模型普及带来能力升级", "企业数字化转型加速市场需求增长"],
    "threats": ["竞品价格战压缩利润空间", "开源替代方案日益成熟"]
  }},
  "marketData": {{
    "marketSize": "500亿元（2024年）",
    "growthRate": "25%",
    "keyPlayers": ["阿里云", "腾讯企点", "智齿科技", "Udesk"],
    "trends": ["大模型应用", "多模态交互", "私有化部署", "行业解决方案"],
    "opportunities": ["中小企业市场", "垂直行业深耕", "出海市场"],
    "challenges": ["同质化竞争", "获客成本上升", "技术门槛降低"]
  }},
  "useCases": {{
    "scenarios": [
      {{"name": "客服自动化", "description": "7x24小时自动回复客户咨询，减少人工客服成本", "targetUsers": ["电商企业", "金融服务", "互联网公司"], "value": "降本增效"}}
    ],
    "userTypes": ["客服主管", "产品经理", "技术负责人"],
    "painPoints": ["人工成本高", "响应速度慢", "服务质量不稳定"],
    "valuePropositions": ["降低客服成本50%", "响应时间<1秒", "服务质量标准化"]
  }},
  "techStack": {{
    "architecture": ["微服务架构", "云原生部署", "容器化"],
    "techStack": ["React", "Node.js", "PostgreSQL", "Redis", "Kubernetes"],
    "emergingTech": ["大语言模型", "向量数据库", "多模态AI"],
    "innovationPoints": ["实时对话理解", "个性化推荐", "自动化流程编排"]
  }},
  "recommendations": {{
    "shortTerm": ["聚焦核心场景，打造标杆客户", "优化定价策略，降低中小企业门槛"],
    "mediumTerm": ["构建开放生态，集成更多第三方服务", "深耕垂直行业，提供行业解决方案"],
    "longTerm": ["拓展海外市场，建立全球化服务网络", "探索新技术应用，保持技术领先"]
  }},
  "confidenceScore": 0.85,
  "dataGaps": ["缺少财务数据", "用户调研数据不足", "竞品详细功能对比数据"]
}}

【关键规则】
1. description 字段必须提供详细描述（50-100字），说明功能/竞品的具体价值
2. 每个分析点都需要有数据支撑，列出来源链接
3. 市场数据需要给出具体数值和增长趋势
4. 建议需要具有可操作性，不能是空泛的口号
5. confidenceScore: 0.3-0.5=数据少, 0.5-0.7=数据中等, 0.7-1.0=数据充足`;

/** LLM 去重判断提示词 - 判断两个功能是否重复 */
export const DEDUPE_FEATURE_PROMPT = `你是文本去重专家。请判断以下两个产品功能描述是否重复。

【研究主题】
{title}

【功能1】
名称: {name1}
描述: {desc1}
来源: {sources1}

【功能2】
名称: {name2}
描述: {desc2}
来源: {sources2}

判断标准（满足任一即算重复）：
1. 名称相似或相同（如"智能客服"和"AI客服"）
2. 描述表达的核心功能相同或高度相似
3. 一个功能是另一个的子集

请直接返回 JSON（不要添加任何其他内容）：
{{"isDuplicate": true或false, "reason": "简要原因", "mergedName": "建议的统一名称（仅当重复时）", "mergedDesc": "建议的统一描述（仅当重复时，更详细的那个）"}}`;

/** LLM 去重判断提示词 - 判断两个竞品是否重复 */
export const DEDUPE_COMPETITOR_PROMPT = `你是文本去重专家。请判断以下两个竞品描述是否重复。

【研究主题】
{title}

【竞品1】
名称: {name1}
行业: {industry1}
描述: {desc1}
市场定位: {position1}

【竞品2】
名称: {name2}
行业: {industry2}
描述: {desc2}
市场定位: {position2}

判断标准（满足任一即算重复）：
1. 产品名称相同或高度相似（如"阿里云"和"Aliyun"）
2. 所属行业相同且描述的核心业务相同
3. 描述的核心业务和市场定位高度相似

请直接返回 JSON（不要添加任何其他内容）：
{{"isDuplicate": true或false, "reason": "简要原因"}}`;

/** LLM 去重判断提示词 - 判断两个字符串是否重复（用于SWOT、市场数据等） */
export const DEDUPE_STRING_PROMPT = `你是文本去重专家。请判断以下两条内容是否重复或表达相同含义。

【主题】
{title}

【内容1】
{str1}

【内容2】
{str2}

判断标准：
1. 表达的核心意思相同或高度相似
2. 即使用词不同，如果描述的是同一事物也算重复

请直接返回 JSON（不要添加任何其他内容）：
{{"isDuplicate": true或false, "reason": "简要原因"}}`;

